{
  "projectMetadata": {
    "projectName": "Compliance-Ready Product Records Platform",
    "version": "2.0.0-agent-optimized",
    "lastUpdated": "2026-02-05",
    "projectLead": "OpenThreads.dev",
    "distributionWedge": "Shopify",
    "restructuredFor": "Long-running agent workflows (Anthropic recommendations)"
  },

  "productScope": {
    "mvp": {
      "description": "Production-ready, enterprise-grade compliance data management platform embedded within Shopify admin, enabling EU-facing merchants to track, manage, and export product compliance information.",
      "coreFeatures": [
        "Shopify embedded app with OAuth and session management",
        "Automated product sync via webhooks and scheduled reconciliation",
        "Compliance data editor with validation",
        "Multi-material composition tracking with percentage validation",
        "Certification and document attachment support",
        "Audit trail for all compliance field changes",
        "JSON and PDF exports with versioning",
        "QR code generation for public compliance pages",
        "Multi-tenant architecture (shop-level isolation)",
        "Role-based access control (admin/editor/viewer)",
        "Compliance status dashboard and reporting"
      ]
    },
    "explicitExclusions": {
      "description": "The following capabilities are explicitly OUT OF SCOPE for v1:",
      "exclusions": [
        "Payment processing, checkout, or cart functionality",
        "Tax calculation engines",
        "Shipping or logistics integrations",
        "Blockchain or distributed ledger technology",
        "AI/ML features (predictive compliance, auto-categorization)",
        "Multi-currency support beyond display",
        "Inventory management",
        "Customer-facing storefront modifications",
        "Third-party marketplace integrations (Amazon, eBay, etc.)",
        "Real-time collaboration features",
        "Mobile native apps (web-responsive only)",
        "Automated regulatory compliance checking",
        "Supply chain tracking beyond supplier reference"
      ]
    },
    "boundaryNotes": "The platform focuses solely on compliance data management and export. All commerce functions remain with Shopify. Any regulatory interpretation or legal compliance validation is the merchant's responsibility."
  },

  "features": [
    {
      "id": "F000",
      "phase": 0,
      "name": "Repository Initialization",
      "description": "Initialize git repository with proper .gitignore and initial commit",
      "status": "pending",
      "dependencies": [],
      "verificationSteps": [
        "1. Run `git init` and verify .git directory created",
        "2. Create .gitignore with node_modules, .env, dist, build",
        "3. Make initial commit with `git commit -m 'chore: initialize repository'`",
        "4. Verify git log shows initial commit"
      ],
      "acceptanceCriteria": [
        "Git repository initialized",
        ".gitignore configured to exclude sensitive files",
        "Initial commit present in history"
      ],
      "testingRequirements": {
        "unit": "N/A - infrastructure task",
        "integration": "N/A",
        "e2e": "Verify git status shows clean working tree"
      },
      "filesAffected": [
        ".gitignore",
        ".git/"
      ],
      "blockers": [],
      "notes": ""
    },
    {
      "id": "F001",
      "phase": 0,
      "name": "Environment Variable Template",
      "description": "Create .env.example template with all required environment variables documented",
      "status": "pending",
      "dependencies": ["F000"],
      "verificationSteps": [
        "1. Create .env.example with all required variables",
        "2. Add comments explaining each variable's purpose",
        "3. Verify no actual secrets are in the file",
        "4. Test that .env.example can be copied to .env and filled in"
      ],
      "acceptanceCriteria": [
        ".env.example exists with all required variables",
        "Each variable has explanatory comment",
        "No actual secrets committed to repo",
        "Variables grouped logically (Database, Shopify, Storage, etc.)"
      ],
      "testingRequirements": {
        "unit": "N/A - configuration task",
        "integration": "Verify all services start with properly configured .env",
        "e2e": "N/A"
      },
      "filesAffected": [
        ".env.example"
      ],
      "blockers": [],
      "notes": "Required variables: SHOPIFY_API_KEY, SHOPIFY_API_SECRET, DATABASE_URL, REDIS_URL, S3_BUCKET, S3_ACCESS_KEY, S3_SECRET_KEY, APP_URL, SCOPES"
    },
    {
      "id": "F002",
      "phase": 0,
      "name": "Docker Compose Configuration",
      "description": "Create docker-compose.yml for local development with Postgres and Redis",
      "status": "pending",
      "dependencies": ["F001"],
      "verificationSteps": [
        "1. Create docker-compose.yml with Postgres 15 and Redis 7 services",
        "2. Configure volume mounts for data persistence",
        "3. Run `docker-compose up -d` and verify services start",
        "4. Test Postgres connection with `psql`",
        "5. Test Redis connection with `redis-cli ping`"
      ],
      "acceptanceCriteria": [
        "docker-compose.yml creates Postgres and Redis services",
        "Services persist data across restarts",
        "Health checks configured for both services",
        "Services accessible from host machine"
      ],
      "testingRequirements": {
        "unit": "N/A - infrastructure task",
        "integration": "Verify database migrations can run against Docker Postgres",
        "e2e": "Full application stack starts with docker-compose"
      },
      "filesAffected": [
        "docker-compose.yml"
      ],
      "blockers": [],
      "notes": "Postgres port 5432, Redis port 6379. Use named volumes for persistence."
    },
    {
      "id": "F003",
      "phase": 0,
      "name": "Entity Relationship Diagram (ERD)",
      "description": "Design and document database schema with ERD showing all tables and relationships",
      "status": "pending",
      "dependencies": ["F000"],
      "verificationSteps": [
        "1. Create ERD diagram (Mermaid format) in docs/schema/erd.md",
        "2. Document all tables: tenants, products, compliance_records, audit_logs, users, exports",
        "3. Show foreign key relationships",
        "4. Include column types and constraints",
        "5. Review ERD with team for accuracy"
      ],
      "acceptanceCriteria": [
        "ERD diagram exists in docs/schema/erd.md",
        "All core tables documented with relationships",
        "Primary keys and foreign keys clearly marked",
        "Diagram renders correctly in Markdown viewers"
      ],
      "testingRequirements": {
        "unit": "N/A - documentation task",
        "integration": "ERD matches actual database schema after migrations",
        "e2e": "N/A"
      },
      "filesAffected": [
        "docs/schema/erd.md"
      ],
      "blockers": [],
      "notes": "Use Mermaid ER diagram syntax for version control friendliness"
    },
    {
      "id": "F004",
      "phase": 0,
      "name": "Risk Register Documentation",
      "description": "Document all project risks with mitigation strategies",
      "status": "pending",
      "dependencies": ["F000"],
      "verificationSteps": [
        "1. Create docs/risks.md with risk register table",
        "2. Document all 10 risks from original PRD",
        "3. Include risk ID, category, likelihood, impact, mitigation",
        "4. Assign risk owners",
        "5. Review with stakeholders"
      ],
      "acceptanceCriteria": [
        "Risk register documented in docs/risks.md",
        "All high-impact risks have mitigation strategies",
        "Risk owners assigned",
        "Risks categorized by type (Technical, Business, Security, Regulatory)"
      ],
      "testingRequirements": {
        "unit": "N/A - documentation task",
        "integration": "N/A",
        "e2e": "N/A"
      },
      "filesAffected": [
        "docs/risks.md"
      ],
      "blockers": [],
      "notes": "Monitor and update risks throughout project lifecycle"
    },
    {
      "id": "F005",
      "phase": 0,
      "name": "User Persona Validation",
      "description": "Validate user personas with target EU merchants through interviews",
      "status": "pending",
      "dependencies": ["F000"],
      "verificationSteps": [
        "1. Document personas in docs/personas.md",
        "2. Conduct 3-5 merchant interviews",
        "3. Validate pain points and goals",
        "4. Update personas based on feedback",
        "5. Get stakeholder sign-off"
      ],
      "acceptanceCriteria": [
        "Personas documented with pain points, goals, characteristics",
        "Validated through at least 3 merchant interviews",
        "Feedback incorporated into persona definitions",
        "Stakeholders approve personas"
      ],
      "testingRequirements": {
        "unit": "N/A - research task",
        "integration": "N/A",
        "e2e": "UI features align with persona needs"
      },
      "filesAffected": [
        "docs/personas.md"
      ],
      "blockers": [],
      "notes": "Primary: EU-facing Shopify merchant (5-200 SKUs). Secondary: Compliance Officer"
    },
    {
      "id": "F006",
      "phase": 0,
      "name": "Scope Boundary Document",
      "description": "Create explicit scope boundary document to prevent scope creep",
      "status": "pending",
      "dependencies": ["F000"],
      "verificationSteps": [
        "1. Create docs/scope.md with IN SCOPE vs OUT OF SCOPE sections",
        "2. Document MVP features from PRD",
        "3. Document explicit exclusions",
        "4. Get stakeholder agreement",
        "5. Reference in project README"
      ],
      "acceptanceCriteria": [
        "Scope boundary document exists",
        "Clear delineation of in-scope and out-of-scope features",
        "All stakeholders agree on scope",
        "Document referenced in decision-making processes"
      ],
      "testingRequirements": {
        "unit": "N/A - documentation task",
        "integration": "N/A",
        "e2e": "Implemented features match scope document"
      },
      "filesAffected": [
        "docs/scope.md"
      ],
      "blockers": [],
      "notes": "Use this document to reject scope creep during development"
    },
    {
      "id": "F007",
      "phase": 0,
      "name": "Non-Functional Requirements Checklist",
      "description": "Document NFRs including security, audit, observability, backup, test coverage, SLOs",
      "status": "pending",
      "dependencies": ["F000"],
      "verificationSteps": [
        "1. Create docs/nfr-checklist.md with all enterprise requirements",
        "2. Document security requirements (OAuth, HMAC, encryption)",
        "3. Document audit trail requirements",
        "4. Document observability requirements (logging, metrics, tracing)",
        "5. Document SLOs (API latency, uptime, sync accuracy)"
      ],
      "acceptanceCriteria": [
        "NFR checklist documented",
        "All 10 enterprise requirement categories covered",
        "Measurable success criteria defined",
        "Checklist used for feature acceptance"
      ],
      "testingRequirements": {
        "unit": "N/A - documentation task",
        "integration": "NFRs validated in integration tests",
        "e2e": "SLOs measured in production"
      },
      "filesAffected": [
        "docs/nfr-checklist.md"
      ],
      "blockers": [],
      "notes": "Categories: Security, Audit Trail, Observability, Backups, Test Coverage, SLOs, Documentation, Multi-Tenancy, Data Integrity, Compliance"
    },
    {
      "id": "F008",
      "phase": 1,
      "name": "Monorepo Setup",
      "description": "Initialize monorepo with Turborepo or Nx for multiple apps and packages",
      "status": "pending",
      "dependencies": ["F000", "F001"],
      "verificationSteps": [
        "1. Choose between Turborepo and Nx (create ADR)",
        "2. Initialize monorepo with chosen tool",
        "3. Create workspace structure (apps/, packages/)",
        "4. Configure package.json with workspace references",
        "5. Test workspace commands (npm run build, test)"
      ],
      "acceptanceCriteria": [
        "Monorepo initialized with Turborepo or Nx",
        "Workspace structure created",
        "ADR documented for tool choice",
        "Cross-package dependencies work correctly",
        "Build and test scripts run from root"
      ],
      "testingRequirements": {
        "unit": "N/A - infrastructure task",
        "integration": "Verify packages can import from shared packages",
        "e2e": "Full monorepo builds and tests successfully"
      },
      "filesAffected": [
        "package.json",
        "turbo.json or nx.json",
        "apps/",
        "packages/",
        "docs/adr/001-monorepo-tool.md"
      ],
      "blockers": [],
      "notes": "Recommended: Turborepo for simplicity, Nx for advanced features"
    },
    {
      "id": "F009",
      "phase": 1,
      "name": "Database ORM Setup",
      "description": "Choose and configure ORM (Prisma or Drizzle) with initial schema",
      "status": "pending",
      "dependencies": ["F002", "F003", "F008"],
      "verificationSteps": [
        "1. Choose between Prisma and Drizzle (create ADR)",
        "2. Initialize ORM in packages/db",
        "3. Create initial schema file",
        "4. Configure migrations",
        "5. Test schema generation and migrations"
      ],
      "acceptanceCriteria": [
        "ORM initialized in packages/db",
        "ADR documented for ORM choice",
        "Schema file created matching ERD",
        "Migrations configured and tested",
        "Type-safe query client generated"
      ],
      "testingRequirements": {
        "unit": "Schema validation tests",
        "integration": "Database connection and query tests",
        "e2e": "Full migration workflow tested"
      },
      "filesAffected": [
        "packages/db/schema.prisma or packages/db/schema.ts",
        "packages/db/migrations/",
        "docs/adr/002-orm-choice.md"
      ],
      "blockers": [],
      "notes": "Recommended: Prisma for developer experience, Drizzle for performance"
    },
    {
      "id": "F010",
      "phase": 1,
      "name": "Architecture Diagrams",
      "description": "Create system architecture diagrams using Mermaid",
      "status": "pending",
      "dependencies": ["F008"],
      "verificationSteps": [
        "1. Create docs/architecture/system-overview.md with Mermaid diagram",
        "2. Document Shopify integration points",
        "3. Document database, API, worker, and frontend components",
        "4. Show data flow for key operations (OAuth, sync, export)",
        "5. Review diagrams with technical stakeholders"
      ],
      "acceptanceCriteria": [
        "System architecture diagram exists and renders correctly",
        "All major components documented",
        "Data flows clearly illustrated",
        "Diagrams match actual implementation"
      ],
      "testingRequirements": {
        "unit": "N/A - documentation task",
        "integration": "N/A",
        "e2e": "Architecture diagrams match deployed system"
      },
      "filesAffected": [
        "docs/architecture/system-overview.md",
        "docs/architecture/data-flows.md"
      ],
      "blockers": [],
      "notes": "Use Mermaid for version control friendly diagrams"
    },
    {
      "id": "F011",
      "phase": 1,
      "name": "OpenAPI Spec Skeleton",
      "description": "Create OpenAPI 3.0 specification skeleton for REST API",
      "status": "pending",
      "dependencies": ["F008"],
      "verificationSteps": [
        "1. Create apps/api/openapi.yaml",
        "2. Define API info, servers, security schemes",
        "3. Create placeholder endpoint definitions",
        "4. Configure Swagger UI for docs",
        "5. Validate spec with openapi-validator"
      ],
      "acceptanceCriteria": [
        "Valid OpenAPI 3.0 spec file exists",
        "API metadata documented (title, version, description)",
        "Security schemes defined (OAuth 2.0)",
        "Swagger UI accessible for documentation",
        "Spec validates without errors"
      ],
      "testingRequirements": {
        "unit": "OpenAPI spec validation",
        "integration": "Generated docs match actual API",
        "e2e": "API endpoints conform to spec"
      },
      "filesAffected": [
        "apps/api/openapi.yaml",
        "apps/api/routes/docs.ts"
      ],
      "blockers": [],
      "notes": "Use OpenAPI spec to generate types and validation schemas"
    },
    {
      "id": "F012",
      "phase": 1,
      "name": "Logging Infrastructure",
      "description": "Set up structured JSON logging with correlation IDs and log levels",
      "status": "pending",
      "dependencies": ["F008"],
      "verificationSteps": [
        "1. Install logging library (pino, winston)",
        "2. Create packages/shared/logger.ts",
        "3. Configure structured JSON output",
        "4. Implement correlation ID middleware",
        "5. Test logging in all apps (admin, api, worker)"
      ],
      "acceptanceCriteria": [
        "Logging library configured in shared package",
        "JSON structured logs with timestamp, level, message, context",
        "Correlation IDs propagate across services",
        "Log levels configurable via environment",
        "All apps use centralized logger"
      ],
      "testingRequirements": {
        "unit": "Logger utility tests",
        "integration": "Correlation ID propagation tests",
        "e2e": "Logs aggregated and searchable"
      },
      "filesAffected": [
        "packages/shared/logger.ts",
        "packages/shared/middleware/correlation-id.ts"
      ],
      "blockers": [],
      "notes": "Required log fields: timestamp, level, message, correlationId, tenantId, userId, context"
    },
    {
      "id": "F013",
      "phase": 1,
      "name": "RBAC Role Definitions",
      "description": "Define role-based access control model with admin/editor/viewer roles",
      "status": "pending",
      "dependencies": ["F009"],
      "verificationSteps": [
        "1. Create packages/shared/rbac/roles.ts with role definitions",
        "2. Define permissions for each role",
        "3. Create role-checking middleware",
        "4. Document RBAC model in docs/security/rbac.md",
        "5. Test role enforcement"
      ],
      "acceptanceCriteria": [
        "Three roles defined: admin, editor, viewer",
        "Permissions matrix documented",
        "Middleware enforces role requirements",
        "Role checks integrated with auth system",
        "Tests verify role isolation"
      ],
      "testingRequirements": {
        "unit": "Role permission logic tests",
        "integration": "RBAC middleware tests with different roles",
        "e2e": "Role-based access verified in UI and API"
      },
      "filesAffected": [
        "packages/shared/rbac/roles.ts",
        "packages/shared/middleware/rbac.ts",
        "docs/security/rbac.md"
      ],
      "blockers": [],
      "notes": "Admin: full access, Editor: edit compliance data, Viewer: read-only"
    },
    {
      "id": "F014",
      "phase": 1,
      "name": "Rate Limiting Infrastructure",
      "description": "Implement Redis-backed rate limiting for API endpoints",
      "status": "pending",
      "dependencies": ["F002", "F008"],
      "verificationSteps": [
        "1. Install rate limiting library (express-rate-limit, ioredis)",
        "2. Create packages/shared/middleware/rate-limit.ts",
        "3. Implement per-tenant and global rate limits",
        "4. Configure limits (100 req/min per tenant, 10k req/min global)",
        "5. Test rate limiting behavior"
      ],
      "acceptanceCriteria": [
        "Rate limiting middleware created",
        "Redis-backed token bucket implementation",
        "Per-tenant and global limits enforced",
        "Rate limit headers returned (X-RateLimit-*)",
        "429 errors returned when limits exceeded"
      ],
      "testingRequirements": {
        "unit": "Rate limit calculation tests",
        "integration": "Rate limiting with Redis",
        "e2e": "Load tests verify rate limits work under load"
      },
      "filesAffected": [
        "packages/shared/middleware/rate-limit.ts"
      ],
      "blockers": [],
      "notes": "Use sliding window algorithm for accurate rate limiting"
    },
    {
      "id": "F015",
      "phase": 1,
      "name": "Input Validation Schemas",
      "description": "Create centralized validation schemas using Zod or Joi",
      "status": "pending",
      "dependencies": ["F008"],
      "verificationSteps": [
        "1. Choose validation library (Zod recommended)",
        "2. Create packages/shared/validation/schemas.ts",
        "3. Define schemas for compliance attributes",
        "4. Implement material percentage validation (sum to 100%)",
        "5. Test all validation rules"
      ],
      "acceptanceCriteria": [
        "Validation library configured",
        "Schemas defined for all compliance attributes",
        "Material percentage sum validation works",
        "ISO country code validation implemented",
        "Validation errors provide clear messages"
      ],
      "testingRequirements": {
        "unit": "Schema validation tests for all field types",
        "integration": "API validation middleware tests",
        "e2e": "Form validation in UI uses same schemas"
      },
      "filesAffected": [
        "packages/shared/validation/schemas.ts",
        "packages/shared/validation/compliance.ts"
      ],
      "blockers": [],
      "notes": "Share validation schemas between frontend and backend"
    },
    {
      "id": "F016",
      "phase": 1,
      "name": "Local Development Documentation",
      "description": "Create comprehensive README with local setup instructions",
      "status": "pending",
      "dependencies": ["F008", "F002"],
      "verificationSteps": [
        "1. Create README.md with project overview",
        "2. Document prerequisites (Node.js ≥18, Docker)",
        "3. Document setup steps (clone, install, docker-compose up)",
        "4. Document environment variables",
        "5. Test README by having new developer follow it"
      ],
      "acceptanceCriteria": [
        "README.md exists with complete setup instructions",
        "Prerequisites clearly listed",
        "Step-by-step setup walkthrough provided",
        "Common issues and troubleshooting documented",
        "New developer can get environment running"
      ],
      "testingRequirements": {
        "unit": "N/A - documentation task",
        "integration": "N/A",
        "e2e": "Fresh checkout follows README successfully"
      },
      "filesAffected": [
        "README.md",
        "docs/setup/local-development.md"
      ],
      "blockers": [],
      "notes": "Keep README updated as project evolves"
    },
    {
      "id": "F017",
      "phase": 1,
      "name": "CI Pipeline Skeleton",
      "description": "Set up basic GitHub Actions CI pipeline with linting and type checking",
      "status": "pending",
      "dependencies": ["F008"],
      "verificationSteps": [
        "1. Create .github/workflows/ci.yml",
        "2. Configure Node.js setup",
        "3. Add lint and type-check jobs",
        "4. Configure caching for node_modules",
        "5. Test pipeline with PR"
      ],
      "acceptanceCriteria": [
        "GitHub Actions workflow file exists",
        "Pipeline runs on push and pull request",
        "Linting fails pipeline if errors found",
        "Type checking fails pipeline if errors found",
        "Pipeline completes in <5 minutes"
      ],
      "testingRequirements": {
        "unit": "N/A - infrastructure task",
        "integration": "N/A",
        "e2e": "Create PR and verify pipeline runs"
      },
      "filesAffected": [
        ".github/workflows/ci.yml"
      ],
      "blockers": [],
      "notes": "Expand pipeline with tests, security scanning, deployment later"
    },
    {
      "id": "F018",
      "phase": 1,
      "name": "TypeScript Configuration",
      "description": "Configure TypeScript for monorepo with strict mode and path aliases",
      "status": "pending",
      "dependencies": ["F008"],
      "verificationSteps": [
        "1. Create root tsconfig.json with strict mode",
        "2. Create tsconfig.json for each app/package",
        "3. Configure path aliases (@/shared, @/db)",
        "4. Test type checking across workspace",
        "5. Verify IDE autocomplete works"
      ],
      "acceptanceCriteria": [
        "TypeScript configured for all apps and packages",
        "Strict mode enabled",
        "Path aliases working",
        "No type errors in codebase",
        "IDE provides accurate type hints"
      ],
      "testingRequirements": {
        "unit": "N/A - configuration task",
        "integration": "Type-safe imports across packages",
        "e2e": "Entire monorepo type-checks successfully"
      },
      "filesAffected": [
        "tsconfig.json",
        "apps/*/tsconfig.json",
        "packages/*/tsconfig.json"
      ],
      "blockers": [],
      "notes": "Enable strict null checks, noImplicitAny, strictFunctionTypes"
    },
    {
      "id": "F019",
      "phase": 1,
      "name": "Package Scripts Setup",
      "description": "Configure npm scripts for development, build, test, and deployment",
      "status": "pending",
      "dependencies": ["F008"],
      "verificationSteps": [
        "1. Add dev script for concurrent development",
        "2. Add build script for production builds",
        "3. Add test script for all tests",
        "4. Add lint and format scripts",
        "5. Document all scripts in README"
      ],
      "acceptanceCriteria": [
        "npm run dev starts all apps in development mode",
        "npm run build creates production builds",
        "npm run test runs all test suites",
        "npm run lint checks code quality",
        "Scripts work from root and individual packages"
      ],
      "testingRequirements": {
        "unit": "N/A - configuration task",
        "integration": "Scripts run successfully across monorepo",
        "e2e": "Full development workflow works with scripts"
      },
      "filesAffected": [
        "package.json",
        "apps/*/package.json",
        "packages/*/package.json"
      ],
      "blockers": [],
      "notes": "Use concurrently or turbo for parallel script execution"
    },
    {
      "id": "F020",
      "phase": 1,
      "name": "Environment Setup Documentation",
      "description": "Document environment configuration for dev, staging, production",
      "status": "pending",
      "dependencies": ["F016"],
      "verificationSteps": [
        "1. Create docs/environments.md",
        "2. Document development environment setup",
        "3. Document staging environment configuration",
        "4. Document production environment requirements",
        "5. Document environment variable management strategy"
      ],
      "acceptanceCriteria": [
        "Environment documentation exists",
        "Each environment clearly defined",
        "Configuration differences documented",
        "Secret management strategy documented",
        "Deployment process outlined"
      ],
      "testingRequirements": {
        "unit": "N/A - documentation task",
        "integration": "N/A",
        "e2e": "Documentation matches actual environments"
      },
      "filesAffected": [
        "docs/environments.md",
        "docs/deployment/README.md"
      ],
      "blockers": [],
      "notes": "Use separate .env files or secret managers for each environment"
    }
  ],

  "environmentSetup": {
    "script": "init.sh",
    "description": "Environment setup and validation script for local development",
    "services": ["Postgres 15", "Redis 7"],
    "requiredEnvVars": [
      "SHOPIFY_API_KEY",
      "SHOPIFY_API_SECRET",
      "DATABASE_URL",
      "REDIS_URL",
      "S3_BUCKET",
      "S3_ACCESS_KEY",
      "S3_SECRET_KEY",
      "APP_URL",
      "SCOPES=read_products,write_products,read_files"
    ],
    "verificationCommand": "npm run smoke-test",
    "setupSteps": [
      "Check Node.js version (≥18)",
      "Validate .env file has required variables",
      "Start Docker Compose (Postgres, Redis)",
      "Wait for service readiness (pg_isready, redis-cli ping)",
      "Run database migrations (npm run db:migrate)",
      "Execute smoke tests (npm run smoke-test)",
      "Output verification report"
    ]
  },

  "progressTracking": {
    "currentSession": null,
    "completedFeatures": [],
    "inProgressFeatures": [],
    "blockedFeatures": [],
    "totalFeatures": 100,
    "completionPercentage": 0,
    "lastUpdated": "2026-02-05T00:00:00Z",
    "sessionHistory": []
  },

  "NOTE": "This is a partial restructure demonstrating the agent-optimized format. Complete PRD includes features F021-F099 covering Phases 2-6 (Shopify Integration, Data Model/API, Compliance UI, Exports, Production Hardening). Original PRD content preserved in originalPRD section below.",

  "originalPRD": "See original PRD.json for complete phases, userFlows, personas, complianceAttributes, enterpriseRequirements, riskRegister, successMetrics, deploymentChecklist, and futureRoadmap. This restructured version transforms phase-based planning into granular, trackable features for agent execution."
}
